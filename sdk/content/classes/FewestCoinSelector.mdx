---
title: FewestCoinSelector
icon: square-c
iconType: solid
---

The FewestCoinSelector class provides a coin selection algorithm that selects the fewest UTXOs required to meet the
target amount. This algorithm is useful for minimizing the size of the transaction and the fees associated with it.

This class is a sub-class of AbstractCoinSelector | **AbstractCoinSelector** and implements the
AbstractCoinSelector.performSelection | **performSelection** method to provide the actual coin selection
logic.

## Extends

- `AbstractCoinSelector`

## Constructors

### new FewestCoinSelector()

```ts
new FewestCoinSelector(availableUTXOs): FewestCoinSelector
```

Constructs a new AbstractCoinSelector instance with an empty UTXO array.

#### Parameters

| Parameter | Type | Default value |
| :------ | :------ | :------ |
| `availableUTXOs` | [`UTXO`](/sdk/content/classes/UTXO)[] | `[]` |

#### Returns

[`FewestCoinSelector`](/sdk/content/classes/FewestCoinSelector)

#### Inherited from

`AbstractCoinSelector.constructor`

#### Source

[transaction/abstract-coinselector.ts:53](https://github.com/dominant-strategies/quais.js/blob/82a01fd664a5dd9d16c4f113b8ff062d0fc6278d/src/transaction/abstract-coinselector.ts#L53)

## Methods

### adjustChangeOutputs()

```ts
private adjustChangeOutputs(changeAmount): void
```

Helper method to adjust change outputs.

#### Parameters

| Parameter | Type | Description |
| :------ | :------ | :------ |
| `changeAmount` | `bigint` | The amount to adjust change outputs by. |

#### Returns

`void`

#### Source

[transaction/coinselector-fewest.ts:324](https://github.com/dominant-strategies/quais.js/blob/82a01fd664a5dd9d16c4f113b8ff062d0fc6278d/src/transaction/coinselector-fewest.ts#L324)

***

### calculateTotalOutputValue()

```ts
private calculateTotalOutputValue(): bigint
```

Calculates the total value of outputs (spend + change).

#### Returns

`bigint`

The total output value.

#### Source

[transaction/coinselector-fewest.ts:179](https://github.com/dominant-strategies/quais.js/blob/82a01fd664a5dd9d16c4f113b8ff062d0fc6278d/src/transaction/coinselector-fewest.ts#L179)

***

### createChangeOutputs()

```ts
private createChangeOutputs(change): UTXO[]
```

Creates change outputs based on the change amount and input denominations.

#### Parameters

| Parameter | Type | Description |
| :------ | :------ | :------ |
| `change` | `bigint` | The change amount to return. |

#### Returns

[`UTXO`](/sdk/content/classes/UTXO)[]

The change outputs.

#### Source

[transaction/coinselector-fewest.ts:157](https://github.com/dominant-strategies/quais.js/blob/82a01fd664a5dd9d16c4f113b8ff062d0fc6278d/src/transaction/coinselector-fewest.ts#L157)

***

### createSpendOutputs()

```ts
private createSpendOutputs(amount): UTXO[]
```

Creates spend outputs based on the target amount and input denominations.

#### Parameters

| Parameter | Type | Description |
| :------ | :------ | :------ |
| `amount` | `bigint` | The target amount to spend. |

#### Returns

[`UTXO`](/sdk/content/classes/UTXO)[]

The spend outputs.

#### Source

[transaction/coinselector-fewest.ts:137](https://github.com/dominant-strategies/quais.js/blob/82a01fd664a5dd9d16c4f113b8ff062d0fc6278d/src/transaction/coinselector-fewest.ts#L137)

***

### decreaseFee()

```ts
decreaseFee(feeReduction): SelectedCoinsResult
```

Decreases the fee by removing inputs if possible and adjusting change outputs.

#### Parameters

| Parameter | Type | Description |
| :------ | :------ | :------ |
| `feeReduction` | `bigint` | The amount by which the fee has decreased. |

#### Returns

`SelectedCoinsResult`

#### Source

[transaction/coinselector-fewest.ts:286](https://github.com/dominant-strategies/quais.js/blob/82a01fd664a5dd9d16c4f113b8ff062d0fc6278d/src/transaction/coinselector-fewest.ts#L286)

***

### findMinimalUTXOSet()

```ts
private findMinimalUTXOSet(sortedUTXOs, totalRequired): UTXO[]
```

Finds the minimal set of UTXOs that can cover the total required amount.

#### Parameters

| Parameter | Type | Description |
| :------ | :------ | :------ |
| `sortedUTXOs` | [`UTXO`](/sdk/content/classes/UTXO)[] | Available UTXOs sorted by denomination (ascending). |
| `totalRequired` | `bigint` | The total amount required (target + fee). |

#### Returns

[`UTXO`](/sdk/content/classes/UTXO)[]

The minimal set of UTXOs.

#### Source

[transaction/coinselector-fewest.ts:103](https://github.com/dominant-strategies/quais.js/blob/82a01fd664a5dd9d16c4f113b8ff062d0fc6278d/src/transaction/coinselector-fewest.ts#L103)

***

### getMaxDenomination()

```ts
private getMaxDenomination(utxos): bigint
```

Gets the maximum denomination value from a list of UTXOs.

#### Parameters

| Parameter | Type | Description |
| :------ | :------ | :------ |
| `utxos` | [`UTXO`](/sdk/content/classes/UTXO)[] | The list of UTXOs. |

#### Returns

`bigint`

The maximum denomination value.

#### Source

[transaction/coinselector-fewest.ts:219](https://github.com/dominant-strategies/quais.js/blob/82a01fd664a5dd9d16c4f113b8ff062d0fc6278d/src/transaction/coinselector-fewest.ts#L219)

***

### getMaxInputDenomination()

```ts
private getMaxInputDenomination(): bigint
```

Gets the maximum denomination value from the selected UTXOs.

#### Returns

`bigint`

The maximum input denomination value.

#### Source

[transaction/coinselector-fewest.ts:198](https://github.com/dominant-strategies/quais.js/blob/82a01fd664a5dd9d16c4f113b8ff062d0fc6278d/src/transaction/coinselector-fewest.ts#L198)

***

### getMaxOutputDenomination()

```ts
private getMaxOutputDenomination(): bigint
```

Gets the maximum denomination value from the spend and change outputs.

#### Returns

`bigint`

The maximum output denomination value.

#### Source

[transaction/coinselector-fewest.ts:208](https://github.com/dominant-strategies/quais.js/blob/82a01fd664a5dd9d16c4f113b8ff062d0fc6278d/src/transaction/coinselector-fewest.ts#L208)

***

### increaseFee()

```ts
increaseFee(additionalFeeNeeded): SelectedCoinsResult
```

Increases the total fee by first reducing change outputs, then selecting additional inputs if necessary.

#### Parameters

| Parameter | Type | Description |
| :------ | :------ | :------ |
| `additionalFeeNeeded` | `bigint` | The additional fee needed. |

#### Returns

`SelectedCoinsResult`

Returns true if successful, false if insufficient funds.

#### Source

[transaction/coinselector-fewest.ts:232](https://github.com/dominant-strategies/quais.js/blob/82a01fd664a5dd9d16c4f113b8ff062d0fc6278d/src/transaction/coinselector-fewest.ts#L232)

***

### performSelection()

```ts
performSelection(target, fee): SelectedCoinsResult
```

Performs coin selection to meet the target amount plus fee, using the smallest possible denominations and
minimizing the number of inputs and outputs.

#### Parameters

| Parameter | Type | Description |
| :------ | :------ | :------ |
| `target` | `bigint` | The target amount to spend. |
| `fee` | `bigint` | The fee amount to include in the selection. |

#### Returns

`SelectedCoinsResult`

The selected UTXOs and outputs.

#### Overrides

`AbstractCoinSelector.performSelection`

#### Source

[transaction/coinselector-fewest.ts:24](https://github.com/dominant-strategies/quais.js/blob/82a01fd664a5dd9d16c4f113b8ff062d0fc6278d/src/transaction/coinselector-fewest.ts#L24)

***

### sortUTXOsByDenomination()

```ts
private sortUTXOsByDenomination(utxos, direction): UTXO[]
```

Sorts UTXOs by their denomination.

#### Parameters

| Parameter | Type | Description |
| :------ | :------ | :------ |
| `utxos` | [`UTXO`](/sdk/content/classes/UTXO)[] | The UTXOs to sort. |
| `direction` | `"asc"` \| `"desc"` | The direction to sort ('asc' for ascending, 'desc' for descending). |

#### Returns

[`UTXO`](/sdk/content/classes/UTXO)[]

The sorted UTXOs.

#### Source

[transaction/coinselector-fewest.ts:340](https://github.com/dominant-strategies/quais.js/blob/82a01fd664a5dd9d16c4f113b8ff062d0fc6278d/src/transaction/coinselector-fewest.ts#L340)

***

### validateUTXOs()

```ts
private validateUTXOs(): void
```

Validates the available UTXOs.

#### Returns

`void`

#### Throws

Will throw an error if there are no available UTXOs.

#### Source

[transaction/coinselector-fewest.ts:362](https://github.com/dominant-strategies/quais.js/blob/82a01fd664a5dd9d16c4f113b8ff062d0fc6278d/src/transaction/coinselector-fewest.ts#L362)
