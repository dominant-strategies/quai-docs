---
title: シャーディング
description: Quai Networkでシャーディングがいかに実装され、スケーリングに使用されるか
---

## ブロックチェーンを現代のデータベースのように機能させる

従来のデータベースは、シャーディング（複数のサーバーにデータを分割）によってスケーリング問題を数十年前に解決しました。Quaiはこの実証済みのアプローチをブロックチェーンに持ち込みますが、重要な革新があります：すべてのシャードで完全なセキュリティを維持することです。

## シャーディングとは何か？

**データベースシャーディング（従来）：**
一つの建物には大きすぎる図書館を想像してください：
- **ソリューション**：本を複数の建物（シャード）に分割
- **メリット**：より多くの司書が同時に来館者を支援可能
- **課題**：どの建物にどの本があるかを知るシステムが必要

**ブロックチェーンシャーディング：**
同じ概念ですが、分散化ネットワーク用です：
- **従来のアプローチ**：データとセキュリティの両方を分割（危険）
- **Quaiのアプローチ**：データのみ分割、セキュリティは統一（安全）

## Quaiのシャーディング実装

**主要メリット：**

1. **並列処理**
   - 各シャードが独立してトランザクションを処理
   - 1つではなく複数のチェックアウトラインを持つようなもの
   - 結果：50,000+ TPS容量

2. **低いノード要件**
   - ノードが特定のシャードのみを追跡することを選択可能
   - 参加のためのハードウェア要件を削減
   - よりアクセス可能 = より分散化

3. **地理的最適化**
   - シャードが自然に地域別に組織される
   - 各シャード内のレイテンシを最小化
   - 世界中でより良いパフォーマンス

## スマートアドレスシステム

**問題：** どのシャードがどのトランザクションを処理するかをどうやって知るか？

**Quaiのソリューション：** アドレスには組み込みルーティング情報が含まれている - ブロックチェーンの郵便番号のようなもの。

**動作方法：**
すべてのQuaiアドレスには、郵便番号のように機能する9ビットプレフィックスがあります：
- **最初の4ビット**：リージョン識別子（国のような）
- **次の4ビット**：リージョン内のゾーン（都市のような）
- **最後のビット**：通貨タイプ（QuaiまたはQi）

#### フォーマット

以下の表は、シャード識別子の各ビットのフォーマットを指定しています。

| ビット0-3      | ビット4-7    | ビット8           |
| ------------- | ----------- | ----------------- |
| リージョン番号 | ゾーン番号   | 台帳識別子         |

### 簡単な例

| 例のアドレス（短縮）      | 場所              | 通貨  |
| ----------------------- | ---------------- | ----- |
| 0x000...               | リージョン0, ゾーン0 | Quai  |
| 0x2A4...               | リージョン2, ゾーン10 | Quai  |
| 0x008...               | リージョン0, ゾーン0 | Qi    |

**メリット：**
- **即座のルーティング**：ノードがトランザクションをどこに送るかを即座に知る
- **ルックアップ不要**：アドレス自体がすべてのルーティング情報を含む
- **効率的処理**：クロスシャードの混乱を排除

技術的詳細については、[QIP-2](https://github.com/quai-network/qips/blob/master/qip-0002.md)を参照してください。

## セキュリティのブレークスルー

**従来のシャーディングの致命的欠陥：**
- 10シャード = 各シャードがセキュリティの1/10を受け取る
- 攻撃者が最も弱いシャードに集中可能
- 1つの強い錠ではなく10の弱い錠を持つようなもの

**Quaiの革新：**
[コインシデントブロック](/jp/learn/advanced-introduction/merged-mining/coincident-blocks)とマージマイニングを通じて：
- すべてのシャードがネットワークセキュリティの100%を維持
- 1つのシャードを攻撃するには全ネットワークを攻撃する必要
- すべてのドアを保護する同じ破られない錠を持つようなもの

**動作方法：**
1. **階層構造**がすべてのシャードを組織
2. **ハッシュリンク参照**がすべてのチェーンを接続
3. **アトミック操作**がすべてのシャードが一緒に進むことを保証
4. **結果**：無制限のシャード、妥協のないセキュリティ

## レガシーテストネットマッピング

初期テストネットは軽量な9シャード階層を使用します。メインネットが9シャード以上に対応すべきであることがすでに結論づけられているため、このマッピングはもはや推奨されません。初期テストネットとのウォレット互換性のためにここで言及します。

アドレスシャード仕様の詳細については、[QIP-4](https://github.com/quai-network/qips/blob/master/qip-0004.md)をご覧ください。