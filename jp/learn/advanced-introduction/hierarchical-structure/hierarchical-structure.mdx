---
title: 階層構造
description: Quai Networkの階層構造の詳細仕様
---

## スケーリングの課題

従来のブロックチェーンは不可能な選択に直面しています：小規模で安全に留まるか、大規模に成長して脆弱になるかです。Quaiの階層構造は、この制限を打破します。

**革新：**
すべてのブランチが独立してトランザクションを処理する一方で、幹がすべてのブランチの安全性を保証する樹木を想像してください。それがQuaiの階層構造です。複数のブロックチェーン「ブランチ」が並列で動作しながら、全体の「樹木」のセキュリティを共有します。

## 動作原理

**3つのレベルの組織：**
1. **プライムチェーン**（幹）：ネットワーク全体を調整
2. **リージョンチェーン**（主要ブランチ）：地理的エリアを組織
3. **ゾーンチェーン**（葉）：実際のトランザクションを処理

**重要なブレークスルー：**
- **従来のシャーディング**：セキュリティを分割（危険）
- **Quaiのアプローチ**：ワークロードのみを分割（安全）

各ゾーンは、[マージマイニング](/jp/learn/advanced-introduction/merged-mining/overview)を通じてネットワーク全体の完全なセキュリティを維持しながら、独立してトランザクションを処理します。

## これが重要な理由

**ユーザーにとって：**
- **50,000+ TPS**：Visaを上回るトランザクション処理
- **サブペニー手数料**：大規模スケールでも持続可能
- **5秒ブロック**：ほぼ即座のトランザクション確認
- **グローバルスケール**：数十億のユーザーに対応可能

**ネットワークにとって：**
- **無制限の成長**：需要増加に応じて新しいゾーンを追加
- **セキュリティ維持**：すべてのゾーンが完全なネットワーク保護を持つ
- **最適化されたパフォーマンス**：マイナーが最高効率のために自己組織化

## セキュリティの革新

**従来のシャーディング問題：**
ブロックチェーンがシャードに分割される際、各シャードは通常、セキュリティの一部分のみを受け取ります。10のシャードを持つネットワークでは、各シャードが総セキュリティの10%のみを受け取り、攻撃に対して脆弱になる可能性があります。

**Quaiのソリューション：**
[マージマイニング](/jp/learn/advanced-introduction/merged-mining/overview)を通じて、すべてのゾーンのすべてのトランザクションがネットワークのセキュリティの100%を受け取ります。これにより、無制限の並列処理を可能にしながら完全なハッシュベースのセキュリティ保証を維持します。

## 自己最適化パフォーマンス

**レイテンシ問題：**
[ネットワークレイテンシ](/jp/learn/advanced-introduction/hierarchical-structure/latency) - ノード間でデータが移動するのにかかる時間 - は、ブロックチェーンパフォーマンスの主要なボトルネックです。

**Quaiのユニークなソリューション：**
マイナーが最適なパフォーマンスのために自然に自己組織化する理由：
1. **高レイテンシ = 低利益**（より多くのアンクルブロック）
2. **マイナーがゾーンを選択**：最良の接続に基づいて
3. **結果**：中央計画なしの地理的自己組織化

**改善の背後にある数学：**

この関係は t = p*n*log_m(n) で説明されます。ここで：
- **t** = 伝播時間
- **p** = ノード間のping時間
- **n** = ネットワーク内のノード数
- **m** = 接続されたピアの平均数

**実世界の例：**
- **Bitcoin**：8ホップ × 100ms ping = 800ms総伝播時間
- **Quaiゾーン**：3ホップ × 10ms ping = 30ms総伝播時間
- **改善**：25倍高速なデータ伝播

この自己組織化システムは、中央調整なしに自然に最適化された地域ネットワークを作成します。

## 並列処理パワー

Quaiを[ブロックチェーンのマルチコアプロセッサ](/jp/learn/advanced-introduction/multithreaded-execution)と考えてください。各ゾーンチェーンは独立したCPUコアのように動作し、完全に同期を保ちながらトランザクションを並列処理します。

**チェーンの連携方法：**
- **独立動作**：各ゾーンが独自のスケジュールでブロックを生成
- **完全な協調**：[ハッシュリンク参照](/jp/learn/advanced-introduction/merged-mining/coincident-blocks)がすべてのチェーンを同期状態に保つ
- **アトミック操作**：クロスチェーントランザクションは完全に完了するか全く実行されない

**3層アーキテクチャ：**

| チェーンタイプ | 階層レベル | ネットワークハッシュレートの% | ブロック時間† |
| ------------ | ---------- | ------------------------- | ----------- |
| プライム      | 1（上位）   | 100%                      | ~20s        |
| リージョン    | 2（中位）   | ~33%                      | ~10s        |
| ゾーン        | 3（下位）   | ~11%                      | ~5s         |

† _Quai Networkのブロック生成は確率的プロセスで、実世界のブロック時間は軽微な変動があります。これらの時間は2×2ネットワーク構成（2リージョン、リージョンあたり2ゾーン、合計4ゾーン）で計算されています。_

### シンプルに開始：単一シャード起動

**なぜ1つから始めるか？**
Quai Networkは単一ゾーンチェーンで起動します。なぜなら、不要なシャードを追加すると：
- **総合セキュリティ減少**：不要時のハッシュレート分割
- **決済時間増加**：利益なしの複雑性
- **リソースの浪費**：未使用容量のためのインフラ運用

**自動拡張トリガー：**
持続的な需要によりアンクルレートが長期間20%を超えると、ネットワークは新しいシャードを追加することで自動的に拡張されます。これにより、成長のあらゆる段階で最適なセキュリティとパフォーマンスが保証されます。

### プライムチェーン：グローバルコーディネーター

**目的**：ネットワークのバックボーンとして機能し、すべてのリージョンが同期を保つことを保証（複数存在する場合）
- **セキュリティ**：最大セキュリティのためにネットワークハッシュレートの100%でマイニング
- **機能**：純粋な調整 - トランザクションやアカウントは存在しない
- **役割**：ネットワークが単一シャードを超えて拡張された際にアクティブになる

### リージョンチェーン：地理的組織

**目的**：最適なパフォーマンスのために地理的エリア内でゾーンを組織（拡張時にアクティブ化）
- **セキュリティ**：各リージョンが総ハッシュレートの約1/Nを受け取る（N = リージョン数）
- **機能**：リージョン内のゾーンチェーンを調整
- **アクティブ化**：ネットワーク需要が拡張をトリガーした際に作成

### ゾーンチェーン：トランザクションが発生する場所

**目的**：実際の作業馬 - すべてのユーザートランザクションを処理
- **速度**：ほぼ即座の確認のための5秒平均ブロック時間
- **機能**：アカウントを保存しトランザクションを処理する唯一のチェーン
- **初期状態**：ネットワークは1つのゾーンチェーンで起動
- **拡張**：需要に基づいて追加ゾーンが追加

各ゾーンは独立した実行スレッドとして動作します。ネットワークが成長するにつれ、これは真の[マルチスレッドブロックチェーン環境](/jp/learn/advanced-introduction/multithreaded-execution)を作成します。

## クロスチェーン通信

**革新：**
[コインシデントブロック](/jp/learn/advanced-introduction/merged-mining/coincident-blocks)を通じて、Quaiはネットワーク内のすべてのチェーン間に自然なブリッジを作成します。これらのハッシュリンク参照により、追加インフラなしでトラストレスなクロスチェーントランザクションが可能になります。

**動作方法：**
- **自動作成**：マージマイニングが自然にこれらの接続を生成
- **ゼロオーバーヘッド**：マイナーからの追加作業不要
- **トラストレス転送**：仲介者なしでチェーン間でアセットを移動
- **アトミック操作**：クロスチェーントランザクションは完全に完了するか全く実行されない

これは、ハッシュベースのブロックチェーン間の真に分散化された最初のブリッジを表し、ネットワーク全体でシームレスな相互運用性を可能にします。