---
title: 内在ブロック重み
description: Quai Networkでブロックがいかに測定・比較されるか
---

## 「十分に良い」の問題

従来のプルーフ・オブ・ワークは簡単な質問をします：「このブロックは最小困難度要件を満たしているか？」もしイエスなら、ブロックは有効とみなされます。もしノーなら、拒否されます。

**問題**：これは実際に行われた作業を無視します。テストを受ける2人の学生を想像してください：
- 学生A：85%のスコア
- 学生B：95%のスコア
- 両方とも80%要件をパスしていますが、明らかに学生Bがより多くの作業をしました

従来のPoWは、閾値をパスした後、両ブロックを「等しく有効」として扱います。PoEMは、1つのブロックが常に他よりも多くの作業を表すことを認識します。

## 内在ブロック重みとは何か？

**内在ブロック重み**は「作業証明書」のようなもので、特定のブロックを作成するために投入された計算作業量を正確に測定します。

これは以下の違いのように考えてください：
- **合格/不合格採点**（従来のPoW）：「最小要件を満たしたか？」
- **正確なスコアリング**（PoEM）：「正確にどのくらい良くできたか？」

この精度により、PoEMはどのブロックが最も多くの作業を表し、ネットワークによって受け入れられるべきかについて、即座で客観的な決定を下すことができます。

## 実際の動作方法

マイナーがブロックを作成するとき、本質的に数学パズルを解いています。彼らが見つける「答え」（ブロックハッシュ）は、どのくらいの作業をしたかを正確に教えてくれます：

**従来のPoWロジック：**
- ブロックハッシュが16個のゼロで始まる？ ✅ 有効
- ブロックハッシュが15個のゼロで始まる？ ❌ 無効
- すべての有効ブロックが同一に扱われる

**PoEMロジック：**
- ブロックAハッシュ：`0x0000b9c86d37...` → 16.462525964ビットの作業
- ブロックBハッシュ：`0x0000b9c86d30...` → 16.462525967ビットの作業
- ブロックBがより多くの作業を表す → ブロックBが勝つ

この測定により、PoEMはいくつかの利点を得ます：

**即座の決定：**
- どのチェーンが長くなるかを待つ必要なし
- すべてのノードが即座に同じ選択をする
- 競合チェーンでマイニングパワーが無駄にならない

**完璧な公平性：**
- 最も多くの作業が常に勝つ
- フォーク解決にランダム性なし
- マイナーが行った作業に比例して報酬を受ける

**スケーラビリティ：**
- 無制限の並列チェーンを協調可能
- 各チェーンが同じ客観的測定を使用
- チェーン間の協調オーバーヘッドなし

<Frame>
	<img src='/images/PoEMHashOverview.jpg' />
</Frame>

## 測定の背後にある数学

技術的詳細に興味がある方のために、内在ブロック重みがいかに計算されるかを説明します：

**簡単な説明：**
ハッシュが持つ先頭ゼロが多いほど、それが表す作業も多くなります。PoEMは対数を使用してこれを正確に測定し、正確な「作業スコア」を得ます。

**公式：**
```
行われた作業 = 総ハッシュ長 - log₂(ブロックハッシュ値)
```

**実例：**
- ハッシュ：`0x0000b9c86d37...`
- これにより：256 - log₂(0x0000b9c86d37...) = 16.462525964ビットの作業

**なぜこれが機能するか：**
- より多くの先頭ゼロを持つハッシュを見つけるには指数的に多くの試行が必要
- 対数がこの指数関係を線形測定に変換
- これにより各ブロックの正確な「困難度スコア」を得る

<Note>
正確な数学計算により、作業の微小な違いでもネットワーク全体で客観的に測定・比較できることが保証されます。
</Note>