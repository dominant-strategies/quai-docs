---
title: 高速最終性
description: Quai Networkでトランザクションがいかに最終性を達成するか
---

## 最終性とは何か？

トランザクションを送信した際、それが逆転できないと確信するまでどのくらい待つ必要があるでしょうか？この待機時間が**最終性**と呼ばれます。

**2つの最終性タイプ：**

1. **統計的最終性**：トランザクションが永続的であることの数学的確実性（51%攻撃を除く）
2. **経済的最終性**：トランザクションを逆転させるコストが攻撃者の利益を上回る

**高速最終性が重要な理由：**
- **より良いユーザーエクスペリエンス**：Bitcoinの確認で10分以上待つ必要なし
- **商取引を可能にする**：商人が即座に支払いを受け入れ可能
- **不確実性を削減**：トランザクションが真に最終となるタイミングが明確

## 課題：Quaiのマルチチェーンアーキテクチャ

Quai Networkはブロックチェーンの階層を使用します：
- **プライムチェーン**：主要調整チェーン（より遅いが、より安全）
- **リージョンチェーン**：地域調整チェーン
- **ゾーンチェーン**：個別トランザクションチェーン（より高速で、ユーザーが相互作用）

**問題**：従来のシステムでは、高速チェーン（ゾーン）でのトランザクションは遅いチェーン（プライム）によって確認されるまで最終ではありません。これが不確実性を生み出します。

## 隠蔽攻撃問題

**隠蔽攻撃とは？**
マイナーが有効なブロックを見つけるが、即座にブロードキャストしないことを想像してください。代わりに、他のマイナーが前のブロックをマイニングしてエネルギーを無駄にしている間、それを隠し持ちます。

**単一チェーン（Bitcoinのような）では：**
- 攻撃者が約10分間ブロックを隠し持つ
- ブロック間でトランザクションが処理されないため、最小限の影響
- 最終的に他のマイナーがブロックを見つけ、隠されたブロックは価値がなくなる

**マルチチェーンシステム（従来のアプローチ）では：**
- ゾーンチェーンが継続的にトランザクションを処理
- しかし、それらのトランザクションはプライムチェーンが確認するまで最終ではない
- 攻撃者がプライムブロックを隠し持ち、ゾーントランザクションを不確実に保つ可能性
- 単一チェーン攻撃よりもはるかに破壊的

## PoEMのソリューション：ボトムアップ最終性

**従来の階層（トップダウン）：**
- プライムチェーンがリードし、ゾーンチェーンがフォロー
- ゾーントランザクションがプライム確認を待つ
- プライムチェーン隠蔽攻撃に脆弱

**PoEM階層（ボトムアップ）：**
- ゾーンチェーンが独立して最終性を達成可能
- プライムチェーンがゾーンチェーンエントロピー蓄積をフォロー
- 隠蔽攻撃が効果なくなる

**動作方法：**
- ゾーンチェーンがプライムチェーンより高速にエントロピーを除去（高頻度のため）
- 最も「幸運な」可能なプライムブロックでも、長期間ゾーンチェーン蓄積を上回れない
- トランザクションが分ではなく秒で最終性を達成

## 最終性比較

| システム      | 統計的最終性時間          | 方法                    |
|-------------|------------------------|------------------------|
| **Bitcoin** | 10分以上（1ブロック）      | 最長チェーンを待つ       |
| **Ethereum**| 12分以上（2エポック）      | 2/3バリデーター承認を待つ |
| **Quai PoEM**| ~5秒（1ゾーンブロック）    | エントロピー蓄積測定     |

**PoEMが高速な理由：**
- **客観的測定**：エントロピーは数学的に希少で、主観的ではない
- **独立チェーン**：ゾーン最終性がプライムブロックに依存しない
- **正確な計算**：任意の閾値ではなく、正確な作業を測定

この計算の[数学的詳細](/jp/learn/advanced-introduction/poem/finality/statistical-finality)について詳しく学ぶ。

<Frame>
	<img src='/images/WithholdingAttack.jpg' />
</Frame>

## 経済的最終性：実世界のセキュリティ

**経済的最終性とは？**
トランザクションを逆転させることが、攻撃者が得られる可能性がある利益よりもコストがかかる時点。

**実世界の例：**
- **コーヒー購入（$5）**：ほぼ即座に経済的に最終
- **車購入（$50,000）**：完全な経済的セキュリティのために30分以上必要かもしれない
- **家購入（$500,000）**：数時間の確認が必要かもしれない

**経済的最終性に影響する要因：**
- **トランザクション価値**：高い価値 = より長い待機時間が必要
- **ネットワークハッシュレート**：より多くのマイナー = より良いセキュリティ = より高速な最終性
- **保留中トランザクション**：ネットワーク渋滞が攻撃コストに影響
- **市場状況**：トークン価格の変動性が攻撃経済学に影響

## 組み込み経済的最終性ツール

Quai Networkには以下を行うスマート最終性計算機が含まれています：

**ネットワーク状況を分析：**
- 現在のハッシュレートとマイニング分布
- 保留中トランザクション量と手数料
- 過去の攻撃コストとパターン

**カスタム推奨を提供：**
- 小額トランザクションの即座の決定
- 大額転送の正確な待機時間
- 状況が変化するとリアルタイム更新

**用途：**
- **商人**：支払いがいつ安全かを正確に知る
- **取引所**：セキュリティを維持しながら預金待機時間を最小化
- **ユーザー**：トランザクションのセキュリティレベルを理解

<Note>
経済的最終性は動的です - 同じトランザクションでも、現在のネットワーク状況と市場要因によって異なる待機時間が必要かもしれません。
</Note>